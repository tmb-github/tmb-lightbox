/** * appendToCss.js * Copyright (c) 2019-2024 Thomas M. Brodhead <https://bmt-systems.com> * Released under the GNU GPLv3 License * Date: 2024-02-06 */
window.appendToCSS=function(e,a,f){f=void 0===f?"dynamic-style-element":f;window.setTimeout(function(){var m,l;if(e&&a){var n=function(b){return b.cssRules.length};var t=function(b){return!Number.isNaN(b-parseFloat(b))};var v=function(b,g){return b.length===g.length&&b.every(function(h,u){return h===g[u]})};var c=document.querySelector("#"+f);if(!c){var k=document.createDocumentFragment();c=document.createElement("style");k.appendChild(c);c.setAttribute("id",f);document.head.appendChild(k)}var d=
c.sheet;e=e.split(/\s+/).join(" ");a=a.replace(/[{}]/g,"").trim();";"!==a.substring(a.length-1,a.length)&&(a+=";");a="{ "+a.split(/\s+/).join(" ")+" }";var p=e+" "+a;k=/(\S+):(?!\S+)/g;var q=[];for(c=k.exec(a);null!==c;)q.push(c[1]),c=k.exec(a);var r=l=!1;Object.keys(d.cssRules).forEach(function(b){if(d.cssRules[b].selectorText===e){var g=[];try{Object.keys(d.cssRules[b].style).forEach(function(h){if(t(h))g.push(d.cssRules[b].style[h]);else throw"End of numeric indices.";})}catch(h){}v(q,g)&&(r=l=
!0,m=b)}});l?r&&(d.deleteRule(m),d.insertRule(p,n(d))):d.insertRule(p,n(d))}else console.log("Error: No selector or declarations provided in call to appendToCSS")},0)};
